<Header/>

<div class="center">
  <PbForm class="register-form" @onSubmit={{action "doRegister"}}>
    <img src="imagenes/session/register.png" />
    
    <PbInput 
      @label={{t "templates.register.username"}}
      @model={{ this.registerData.username }} 
      @focusOut={{ action "checkUsername" }}
      @customValidations={{ this.usernameFormatValidation }}
      @required={{ true }}
      @error={{ if (not this.validUsername) (t "templates.register.errors.userAlreadyExists") }} />

    <PbInput 
      @type="password" 
      @label={{t "templates.register.password"}}
      @model={{ this.registerData.password }} 
      @required={{ true }} />

    <PasswordConfirmation @password={{ this.registerData.password }} />

    <PbInput 
      @type="email" 
      @label="{{t "templates.register.email"}} ({{t "templates.register.options.optional"}})"
      @model={{ this.registerData.email }}
      @customValidations={{ this.mailValidation }} />

    <PbAvatarGrid 
      @avatars={{this.avatars}} 
      @errorMessage={{ t "templates.register.errors.noAvatar" }}
      @onClick={{action (mut this.registerData.avatarURL)}} 
      @avatarUrl={{this.registerData.avatarURL}} />

    <p>{{t "templates.register.parentalConsent"}}</p>

    <small>{{t "templates.register.inAge"}}</small>
    <p></p>

    <PbInput 
      @label={{t "templates.register.parentalFullname"}}
      @model={{ this.registerData.parentName }} 
      @required={{ true }}
      @customValidations={{ this.parentNameValidation }} />

    <PbInput
      @label={{t "templates.register.parentalId"}}
      @model={{ this.registerData.parentDNI }} 
      @required={{ true }} 
      @customValidations={{ this.DNIValidation }} />

    <Collapsable 
      @title={{t "templates.register.whyData.title"}}
      @class="left">

      <p>{{t "templates.register.whyData.privacy"}}</p>
      <p>
        {{t "templates.register.whyData.dataProtectionLaw"}}
        <TermsAndConditionsLink />.
      </p>
      <p>
        {{t "templates.register.whyData.parentalContact"}} 
        <a href="mailto:pilasbloques@program.ar">pilasbloques@program.ar</a> 
        {{t "templates.register.whyData.whyContact"}}
      </p>

    </Collapsable>

    <Input 
      @type={{"checkbox"}} 
      required /> 
    <span>
      {{t "templates.register.iHaveReadAndAccept"}} 
      <TermsAndConditionsLink />
    </span>

    <br><br>
    <ProgressButton 
      class="link" 
      type="submit" 
      @isDisabled={{not this.validUsername}} 
      @loading={{ this.pilasBloquesApi.loading.register }}>
        {{t "templates.register.register"}}
    </ProgressButton>
  </PbForm>
  <br><br>
</div>